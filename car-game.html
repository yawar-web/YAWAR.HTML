<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Car Game</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; }
        canvas { display: block; margin: 0 auto; background: #444; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const roadWidth = 200;
        const roadX = (canvas.width - roadWidth) / 2;
        const carWidth = 40;
        const carHeight = 80;
        let carX = canvas.width / 2 - carWidth / 2;
        const carY = canvas.height - carHeight - 20;
        let leftPressed = false;
        let rightPressed = false;
        let obstacles = [];
        let gameOver = false;
        let score = 0;

        function drawRoad() {
            ctx.fillStyle = '#888';
            ctx.fillRect(roadX, 0, roadWidth, canvas.height);
            ctx.strokeStyle = '#fff';
            ctx.setLineDash([20, 20]);
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function drawCar() {
            ctx.fillStyle = '#0f0';
            ctx.fillRect(carX, carY, carWidth, carHeight);
        }

        function drawObstacles() {
            ctx.fillStyle = '#f00';
            obstacles.forEach(obs => {
                ctx.fillRect(obs.x, obs.y, obs.w, obs.h);
            });
        }

        function moveCar() {
            if (leftPressed && carX > roadX) carX -= 5;
            if (rightPressed && carX < roadX + roadWidth - carWidth) carX += 5;
        }

        function updateObstacles() {
            for (let obs of obstacles) {
                obs.y += 4;
            }
            obstacles = obstacles.filter(obs => obs.y < canvas.height);
            if (Math.random() < 0.02) {
                const obsWidth = 40 + Math.random() * 40;
                const obsX = roadX + Math.random() * (roadWidth - obsWidth);
                obstacles.push({ x: obsX, y: -60, w: obsWidth, h: 30 });
            }
        }

        function checkCollision() {
            for (let obs of obstacles) {
                if (
                    carX < obs.x + obs.w &&
                    carX + carWidth > obs.x &&
                    carY < obs.y + obs.h &&
                    carY + carHeight > obs.y
                ) {
                    gameOver = true;
                }
            }
        }

        function drawScore() {
            ctx.fillStyle = '#fff';
            ctx.font = '20px Arial';
            ctx.fillText('Score: ' + score, 10, 30);
        }

        function gameLoop() {
            if (gameOver) {
                ctx.fillStyle = 'rgba(0,0,0,0.7)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#fff';
                ctx.font = '40px Arial';
                ctx.fillText('Game Over', 90, 300);
                ctx.font = '24px Arial';
                ctx.fillText('Score: ' + score, 150, 350);
                ctx.font = '18px Arial';
                ctx.fillText('Refresh to play again', 110, 400);
                return;
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawRoad();
            moveCar();
            drawCar();
            updateObstacles();
            drawObstacles();
            checkCollision();
            drawScore();
            score++;
            requestAnimationFrame(gameLoop);
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowLeft') leftPressed = true;
            if (e.key === 'ArrowRight') rightPressed = true;
        });
        document.addEventListener('keyup', e => {
            if (e.key === 'ArrowLeft') leftPressed = false;
            if (e.key === 'ArrowRight') rightPressed = false;
        });

        gameLoop();
    </script>
</body>
</html>
